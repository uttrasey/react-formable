!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.formable=e()}}(function(){return function e(r,t,n){function o(i,u){if(!t[i]){if(!r[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var a=t[i]={exports:{}};r[i][0].call(a.exports,function(e){var t=r[i][1][e];return o(t?t:e)},a,a.exports,e,r,t,n)}return t[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,r,t){"use strict";var n=function(){};r.exports=n},{}],2:[function(e,r,t){(function(n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,u=o(i),f=e("./helpers/identity"),l=o(f),a=e("./helpers/flatten"),p=o(a),d=e("./helpers/values"),c=o(d);t["default"]=u["default"].createClass({displayName:"Errors",propTypes:{errors:i.PropTypes.arrayOf(i.PropTypes.string),fieldErrors:i.PropTypes.oneOfType([i.PropTypes.array,i.PropTypes.object]),additionalErrors:i.PropTypes.arrayOf(i.PropTypes.string),scoped:i.PropTypes.bool,renderError:i.PropTypes.func},getDefaultProps:function(){return{errors:[],additionalErrors:[],fieldErrors:[],scoped:!1,renderError:l["default"]}},render:function(){var e=this,r=this.props,t=r.errors,n=r.additionalErrors,o=r.scoped,i=(0,p["default"])((0,c["default"])(this.props.fieldErrors)).filter(function(e){return"string"==typeof e}),f=[].concat(o?i:t).concat(n);return u["default"].createElement("ul",s({className:"errors"},this.props),f.map(function(r,t){return u["default"].createElement("li",{key:t}," ",e.props.renderError(r)," ")}))}}),r.exports=t["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./helpers/flatten":9,"./helpers/identity":10,"./helpers/values":12}],3:[function(e,r,t){(function(n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,u=o(i),f=e("./helpers/values"),l=o(f),a=e("./fieldset"),p=o(a),d=e("warning"),c=o(d);t["default"]=u["default"].createClass({displayName:"Fieldlist",propTypes:{errors:i.PropTypes.arrayOf(i.PropTypes.string),fieldErrors:i.PropTypes.arrayOf(i.PropTypes.object),name:i.PropTypes.string.isRequired,children:i.PropTypes.node},getInputs:function(){return{ref:this,refs:(0,l["default"])(this.refs.fieldset.getInputs().refs).filter(function(e){return e.refs&&(0,l["default"])(e.refs).length})}},render:function(){var e=this;(0,c["default"])(this.props.name,"Fieldlist found without a name prop. The children of this component will behave eratically");var r=this.props.errors||[],t=this.props.fieldErrors||[];return u["default"].createElement(p["default"],s({},this.props,{ref:"fieldset",errors:[],fieldErrors:{}}),u["default"].Children.map(this.props.children,function(n,o){return u["default"].createElement(p["default"],{name:e.props.name+o,errors:r,fieldErrors:t[o]},n)}))}}),r.exports=t["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fieldset":4,"./helpers/values":12,warning:1}],4:[function(e,r,t){(function(n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,i=o(s),u=e("./helpers/cloneChildren"),f=o(u),l=e("./helpers/values"),a=o(l),p=e("./helpers/identity"),d=o(p),c=e("warning"),h=o(c);t["default"]=i["default"].createClass({displayName:"Fieldset",propTypes:{errors:s.PropTypes.arrayOf(s.PropTypes.string),fieldErrors:s.PropTypes.object,name:s.PropTypes.string.isRequired,children:s.PropTypes.node},getInputs:function(){return{ref:this,refs:(0,a["default"])(this.refs||{}).filter(function(e){return e.getInputs||e.getValue}).map(function(e){return e.getInputs?e.getInputs():{ref:e}}).reduce(function(e,r){return e[r.ref.props.name]=r,e},{})}},render:function(){var e=this;(0,h["default"])(this.props.name,"Fieldset found without a name prop. The children of this component will behave eratically");var r=this.props.fieldErrors||{},t=[],n=function(e){return e.props&&e.props.name||"Errors"===e.type.displayName},o=function(n){return"Errors"===n.type.displayName?{errors:e.props.errors,fieldErrors:e.props.fieldErrors||{}}:((0,h["default"])(!n.ref,'Attempting to attach ref "'+n.ref+'" to "'+n.props.name+'" will be bad for your health'),(0,h["default"])(-1===t.indexOf(n.props.name),'Duplicate name "'+n.props.name+'" found. Duplicate fields will be ignored'),t=t.concat(n.props.name),{ref:n.ref||n.props.name,errors:e.props.errors,fieldErrors:n.props.fieldErrors||r[n.props.name],onChange:n.props.onChange||d["default"],onSubmit:n.props.onSubmit||d["default"]})};return i["default"].createElement("div",this.props,(0,f["default"])(n,o,this.props.children))}}),r.exports=t["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./helpers/cloneChildren":7,"./helpers/identity":10,"./helpers/values":12,warning:1}],5:[function(e,r,t){(function(r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s="undefined"!=typeof window?window.React:"undefined"!=typeof r?r.React:null,i=n(s),u=e("./helpers/uniq"),f=n(u),l=e("./helpers/values"),a=n(l),p=e("./helpers/identity"),d=n(p),c=e("./helpers/cloneChildren"),h=n(c),y=e("./helpers/compose"),m=n(y),g=e("warning"),v=n(g),w=function(){return{valid:!0,fieldValues:{},fieldErrors:{},errors:[]}};t.getBlankForm=w;var b=function O(e){for(var r=arguments,t=!0;t;){var n=e;if(t=!1,!n||"string"==typeof n)return n;if(n.constructor===Array)return[].concat.apply([],n.map(function(e){return O(e)}));if("object"!=typeof n)return n;r=[e=(0,a["default"])(n)],t=!0}};t.deNestErrors=b;var E=function T(e){return e?e.constructor===Array?e.reduce(function(e,r){return e[r.ref.props.name]=T(r),e},{}):e.refs&&e.refs.constructor===Array?e.refs.map(function(e){return T(e)}):e.refs&&"object"==typeof e.refs?(0,a["default"])(e.refs).reduce(function(e,r){return e[r.ref.props.name]=T(r),e},{}):e.ref.getValue():e},P=function _(e,r,t,n){if(void 0===t&&(t={}),!e)return e;if(e.constructor===Array){var o=function(){var o=[],s=e.reduce(function(e,s){var i=s.ref.props.name,u=_(s,r[i],t[i],n);return e[i]=u.fieldErrors,o=o.concat(u.errors),e},{});return{v:{fieldErrors:s,errors:o}}}();if("object"==typeof o)return o.v}var s=void 0,i=[];e.refs&&(s=e.refs.constructor===Array?e.refs.map(function(e,o){var s=_(e,r[o],t[o],n);return i=i.concat(s.errors),s.fieldErrors}):(0,a["default"])(e.refs).reduce(function(e,o){var s=o.ref.props.name,u=_(o,r[s],t[s],n);return e[s]=u.fieldErrors,i=i.concat(u.errors),e},{}));var u=[].concat(e.ref.props.validators||[],e.ref.validators||[]),f=u.map(function(o){return o.call(e.ref,r,n.fieldValues,n.fieldErrors,t)}).filter(d["default"]);return i=i.concat(f),s=s||f,{fieldErrors:s,errors:i}};t["default"]=i["default"].createClass({displayName:"Form",propTypes:{circular:s.PropTypes.bool,onSubmit:s.PropTypes.func,onChange:s.PropTypes.func,showErrorsOnSubmit:s.PropTypes.bool,showErrorsOnChange:s.PropTypes.bool,children:s.PropTypes.node},getDefaultProps:function(){return{onChange:function(){},onSubmit:function(){},showErrorsOnSubmit:!0,showErrorsOnChange:!1}},getInitialState:function(){return{fieldErrors:{},errors:[]}},serialize:function(){var e=0,r=20,t=(0,a["default"])(this.refs||{}).filter(function(e){return e.getInputs||e.getValue}).map(function(e){return e.getInputs?e.getInputs():{ref:e}}),n=w(),s=w();do{s=o({},n),n.fieldValues=E(t);var i=P(t,n.fieldValues,n.fieldErrors,n),u=i.fieldErrors,l=i.errors;n.fieldErrors=u,n.errors=(0,f["default"])(l),e++}while(this.props.circular&&r>e&&JSON.stringify(n)!==JSON.stringify(s));return n.valid=!n.errors.length,n},onChange:function(){this.props.onChange(this.serialize()),this.props.showErrorsOnChange&&this.showFieldErrors()},onSubmit:function(e){e&&e.preventDefault&&e.preventDefault(),this.props.showErrorsOnSubmit&&this.showFieldErrors(),this.props.onSubmit(this.serialize())},onKeyDown:function(e){"Enter"===e.key&&"textarea"!==e.target.type&&this.onSubmit(e)},showFieldErrors:function(){var e=this.serialize(),r=e.fieldErrors,t=e.errors;return this.setState({errors:t,fieldErrors:r}),t},clearFieldErrors:function(){this.setState({fieldErrors:{},errors:[]})},render:function(){var e=this,r=[],t=function(e){return e.props&&e.props.name||"Errors"===e.type.displayName},n=function(t){return"Errors"===t.type.displayName?{errors:e.state.errors,fieldErrors:e.state.fieldErrors}:((0,v["default"])(!t.ref,'Attempting to attach ref "'+t.ref+'" to "'+t.props.name+'" will be bad for your health'),(0,v["default"])(-1===r.indexOf(t.props.name),'Duplicate name "'+t.props.name+'" found. Duplicate fields will be ignored'),r=r.concat(t.props.name),{ref:t.ref||t.props.name,onChange:(0,m["default"])(t.props.onChange||d["default"],e.onChange),onSubmit:(0,m["default"])(t.props.onSubmit||d["default"],e.onSubmit),errors:e.state.errors,fieldErrors:t.props.fieldErrors||e.state.fieldErrors[t.props.name]})};return i["default"].createElement("form",o({},this.props,{ref:"form",onSubmit:this.onSubmit,onChange:function(){},onKeyDown:this.onKeyDown}),(0,h["default"])(t,n,this.props.children))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./helpers/cloneChildren":7,"./helpers/compose":8,"./helpers/identity":10,"./helpers/uniq":11,"./helpers/values":12,warning:1}],6:[function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=e("./form"),s=n(o),i=e("./fieldset"),u=n(i),f=e("./fieldlist"),l=n(f),a=e("./inputs/input"),p=n(a),d=e("./errors"),c=n(d);t.Form=s["default"],t.getBlankForm=o.getBlankForm,t.Fieldset=u["default"],t.Fieldlist=l["default"],t.Input=p["default"],t.Errors=c["default"],t["default"]=s["default"]},{"./errors":2,"./fieldlist":3,"./fieldset":4,"./form":5,"./inputs/input":13}],7:[function(e,r,t){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,r,t){return"object"!=typeof t||null===t?t:i["default"].Children.map(t,function(t){return"object"!=typeof t||null===t?t:e(t)?i["default"].cloneElement(t,r(t),t.props&&t.props.children):i["default"].cloneElement(t,{},o(e,r,t.props&&t.props.children))})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var s="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,i=n(s);r.exports=t["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,r,t){"use strict";function n(e,r){return function(){return e(r.apply(void 0,arguments))}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,r.exports=t["default"]},{}],9:[function(e,r,t){"use strict";function n(e){return[].concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,r.exports=t["default"]},{}],10:[function(e,r,t){"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,r.exports=t["default"]},{}],11:[function(e,r,t){"use strict";function n(e){return e.reduce(function(e,r){return-1===e.indexOf(r)?e.concat(r):e},[])}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,r.exports=t["default"]},{}],12:[function(e,r,t){"use strict";function n(e){var r=[];for(var t in e)r=r.concat(e[t]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,r.exports=t["default"]},{}],13:[function(e,r,t){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,i=n(s),u=function(e){return e};t["default"]=i["default"].createClass({displayName:"input",propTypes:{fieldErrors:s.PropTypes.arrayOf(s.PropTypes.string),validateOnBlur:s.PropTypes.bool,onChange:s.PropTypes.func,onSubmit:s.PropTypes.func,className:s.PropTypes.string},getDefaultProps:function(){return{onChange:u,onSubmit:u,className:""}},getValue:function(){return this.refs.input.value},onChange:function(e){this.props.validateOnBlur||this.props.onChange(e)},onBlur:function(){this.props.validateOnBlur&&this.props.onChange()},render:function(){var e=this.props.fieldErrors&&this.props.fieldErrors.length,r=this.props.className+" "+(e?"error":"");return i["default"].createElement("input",o({},this.props,{className:r,onChange:this.onChange,onBlur:this.onBlur,ref:"input"}))}}),r.exports=t["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[6])(6)});
